query FindAllProjects {
  findAllProjects {
    _id
    name
    location
    createdAt
    status {
      _id
      name
    }
    priority {
      _id
      name
    }
    project_leader{
      _id
      person{
        name
      }  
    }
  }
}

query FindProjectById($id: String!){
  findProjectById(id: $id) {
    _id
    name
    location
    description
    target_date
    status {
      _id
      name
    }
    priority {
      _id
      name
    }
    project_leader{
      _id
      person{
        name
        email
      }  
    }
    warehouse
    createdAt
    finished_at
    project_closing {
      note
      document
      closed_by {
          _id
          person {
              name
              email
              phone_number
              address
          }
      }
      material_used {
          _id
          remain
          price
          date
          warehouse
          out
          material {
              _id
              id
              name
              description
              status
              conversion
              merk {
                  _id
                  name
              }
              unit_measure {
                  _id
                  name
              }
              minimum_unit_measure {
                  _id
                  name
              }
          }
      }
      request_project_closing {
          _id
          requested_at
          status
          handled_date
      }
    }
  }
}

mutation CreateProject($createProjectInput: CreateProjectInput!){
  createProject(createProjectInput: $createProjectInput) {
    _id
    name
    location
    project_leader {
      _id
      person {
        name
        address
        email
      }
    }
  }
}

mutation UpdateProject($id: String!, $updateProjectInput: UpdateProjectInput!) {
  updateProject(id: $id, updateProjectInput: $updateProjectInput) {
    _id
    name
    location
    project_leader {
      _id
      person {
        name
        address
        email
      }
    }
  }
}

# PROJECT EMPLOYEE HANDLER

query GetAllProjectEmployees ($id: String!){
    getAllProjectEmployees(id: $id) {
        registered {
            _id
            person {
                name
                email
                phone_number
                address
            }
            skill {
                _id
                name
            }
            role {
                _id
                name
            }
            status
        }
        unregistered {
            _id
            person {
                name
                email
                phone_number
                address
            }
            role {
                _id
                name
            }
            skill {
                _id
                name
            }
        }
    }
}

mutation AddNewProjectEmployee ($id: String!, $employees: [String!]!){
    addNewProjectEmployee(id: $id, employees: $employees) {
        _id
        person {
            name
            email
            phone_number
            address
        }
        role {
            _id
            name
        }
        skill {
            _id
            name
        }
    }
}

mutation RemoveProjectEmployee ($id: String!, $employee: String!, $description: String!){
    removeProjectEmployee(id: $id, employee: $employee, description: $description) {
        _id
        person {
            name
            email
            phone_number
            address
        }
        role {
            _id
            name
        }
        skill {
            _id
            name
        }
    }
}

mutation CreateAttendance ($createAttendanceInput: CreateAttendanceModuleInput!) {
    createAttendance(createAttendanceInput: $createAttendanceInput) {
        _id
        start_date
        end_date
        submit_status
        description
    }
}

query FindAllAttendanceModules ($projectId: String!){
    findAllAttendanceModules(projectId: $projectId) {
        _id
        start_date
        end_date
        submit_status
        description
    }
}

query FindOneAttendanceModule ($projectId: String!, $moduleId: String!){
    findOneAttendanceModule(projectId: $projectId, moduleId: $moduleId) {
        _id
        start_date
        end_date
        submit_status
        description
        attendance {
            date
            attendance_detail {
                check_in
                check_out
                employee {
                    _id
                    hire_date
                    salary
                    status
                    person {
                        name
                        email
                        phone_number
                        address
                    }
                }
            }
        }
    }
}

mutation UpdateAttendanceModule ($projectId: String!, $moduleId: String! $updateAttendanceModuleInput: UpdateAttendanceModuleInput!){
    updateAttendanceModule(
        projectId: $projectId
        moduleId: $moduleId
        updateAttendanceModuleInput: $updateAttendanceModuleInput
    ) {
        _id
    }
}

mutation DeleteAttendanceModule ($projectId: String!, $moduleId: String!){
    deleteAttendanceModule(projectId: $projectId, moduleId: $moduleId) {
        _id
    }
}
